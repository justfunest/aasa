{% extends "layouts/app.twig" %}

{% macro error_block(error) %}
    {% if error %}
        <span class="help-block">{{ error | first}}</span>
    {% endif %}
{% endmacro %}
{% import _self as forms %}

{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">
                Uus Laen
            </h3>
        </div>
        <div class="panel-body">
            <form role="form" method="post" action="{{ router.pathFor('loans.store') }}" >
                <div class="form-group{{ errors.name  ? ' has-error' : ''}}">
                    <label for="name">
                        Nimi *
                    </label>
                    <input type="text" class="form-control" id="name" name="name" value="{{ previous.name }}" />
                    {{ forms.error_block(errors.name) }}
                </div>
                <div class="form-group{{ errors.personal_code  ? ' has-error' : ''}}">
                    <label for="personalCode">
                        Isikukood *
                    </label>
                    <input type="text" class="form-control" id="personalCode" name="personal_code" value="{{ previous.personal_code }}" />
                    {{ forms.error_block(errors.personal_code) }}
                </div>
                <div class="form-group{{ errors.amount  ? ' has-error' : ''}}">
                    <label for="amount">
                        Laenu summa *
                    </label>
                    <input type="text" class="form-control" id="amount" name="amount" value="{{ previous.amount }}" />
                    {{ forms.error_block(errors.amount) }}
                </div>
                <div class="form-group{{ errors.period  ? ' has-error' : ''}}">
                    <label for="period">
                        Periood kuudes *
                    </label>
                    <input type="text" class="form-control" id="period" name="period" value="{{ previous.period }}" />
                    {{ forms.error_block(errors.period) }}
                </div>

                <div class="form-group{{ errors.purpose  ? ' has-error' : ''}}">
                    <label for="purposeOfUse">
                        Kasutuseesm채rk *
                    </label>
                    <textarea class="form-control" id="purposeOfUse" name="purpose" value="{{ previous.purpose }}" />{{ previous.purpose }}</textarea>
                    {% if errors.purpose %}
                        <span class="help-block">V채li peab sisaltama 체hte s천nadest "puhkus, remont, koduelektroonika, pulmad, rent, auto, kool, investeering" </span>
                    {% endif %}
                </div>
                <button type="submit" class="btn btn-default">
                    Submit
                </button>
            </form>
        </div>
    </div>
{% endblock %}